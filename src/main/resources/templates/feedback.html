<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="fragments/layout :: headerFragment"></head>
<body class="results feedback" th:style="'--image-url:url(/image/' + ${feedback.imageId} + ');'">
<h1 th:fragment="h1Fragment">
    <a th:href="@{/}" th:utext="#{fragments.layout.appTitle}" th:title="#{fragments.layout.nav.home.tooltip}"></a></h1>

<main cf-context>
</main>
<nav th:include="fragments/layout :: navFragment"></nav>

<form id="feedback" th:action="@{/user-feedback}" cf-form method="post">
    <fieldset>
        <label for="user">What is your name?</label>
        <input id="user" name="feedback.user" required="required" cf-questions="Hi there! I am the feedback form.&&I am *not* a chatbot ;)&&What is your name?" />
    </fieldset>

    <fieldset>
        <label for="rating">How would you rate the application?</label>
        <label>
            <input type="radio" id="rating" name="feedback.rating" cf-questions="Nice meeting you, {user}&&How would you rate the recyclette application?" value="0" />
            Poor
        </label>
        <label>
            <input type="radio" id="rating-1" name="feedback.rating" value="1" />
            Average
        </label>
        <label>
            <input type="radio" id="rating-2" name="feedback.rating" value="2" />
            Cool
        </label>
    </fieldset>

    <fieldset>
        <label for="suggestedName" th:if="${feedback.success}" th:text="'OK&&The picture you sent was analyzed as ' + ${feedback.name} + '&&How would you name it?'"></label>
        <label for="suggestedName" th:if="${!feedback.success}" th:text="'OK&&The picture you sent was not recognized :(&&How would you name it?'"></label>
        <input id="suggestedName" name="feedback.suggestedName" />
    </fieldset>

    <fieldset>
        <label for="suggestedStatus">Would you consider this object as recyclable?</label>
        <label>
            <input type="radio" id="suggestedStatus" name="feedback.suggestedStatus" cf-questions="Thanks.&&Would you consider this {suggestedName} as recyclable?" value="recyclable" />
            Yes
        </label>
        <label>
            <input type="radio" id="suggestedStatus-1" name="feedback.suggestedStatus" value="not-recyclable" />
            No
        </label>
    </fieldset>

    <fieldset>
        <label for="comment">Do you have any further comments?</label>
        <input id="comment" name="feedback.comment" />
    </fieldset>

    <fieldset>
        <label for="email">Can you provide an e-mail address, in case we want to discuss with you any further?</label>
        <input id="email" name="feedback.email" type="email" cf-questions="Can you provide an e-mail address, in case we want to discuss with you any further?&&This is optional." />
    </fieldset>

    <input type="submit" />

    <input type="hidden" id="imageId" name="feedback.imageId" th:value="${feedback.imageId}" />
    <input type="hidden" id="success" name="feedback.success" th:value="${feedback.success}" />
    <input type="hidden" id="name" name="feedback.name" th:value="${feedback.name}" />
    <input type="hidden" id="score" name="feedback.score" th:value="${feedback.score}" />
    <input type="hidden" id="scoreLabel" name="feedback.scoreLabel" th:value="${feedback.scoreLabel}" />
    <input type="hidden" id="statusName" name="feedback.statusName" th:value="${feedback.statusName}" />
    <input type="hidden" id="statusText" name="feedback.statusText" th:value="${feedback.statusText}" />
    <input type="hidden" id="statusDescription" name="feedback.statusDescription" th:value="${feedback.statusDescription}" />
</form>

<script type="text/javascript" src="https://cf-4053.kxcdn.com/conversational-form/0.9.6/conversational-form.min.js" crossorigin></script>
<script>
    window.addEventListener('load', function() {
        var form = document.getElementById('feedback');
        if (form) form.style.display = 'none';
    });
</script>
</body>
</html>
